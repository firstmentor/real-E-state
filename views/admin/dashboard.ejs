<%- include('./navbar.ejs') %>
<%- include('./sidebar.ejs') %>

<!-- Content Wrapper -->
<div class="content-wrapper">
  <!-- Page Header -->
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1 class="m-0 text-dark">Dashboard</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </div>
      </div>
    </div>
    <hr style="color: #007bff;">
  </div>

  <!-- Main Content -->
  <div class="content">
    <div class="container-fluid">
      <div class="row">

        <% if (role === 'admin') { %>
          <!-- Admin Dashboard -->
           <div class="col-md-12">
            <a href="/admin/bookings/export-excel" class="btn btn-success mb-2">
              <i class="fas fa-file-excel"></i> Export to Excel
            </a>
            
            <a href="/admin/bookings/export-pdf" class="btn btn-danger mb-2">
              <i class="fas fa-file-pdf"></i> Export to PDF
            </a>

           </div>
          
          <div class="col-lg-6">
            <!-- Total Properties -->
            <div class="card">
              <div class="card-header bg-primary">
                <h5 class="m-0 text-white"><i class="fas fa-building"></i> Total Properties</h5>
              </div>
              <div class="card-body">
                <h3>Total Properties</h3>
                <h4><%= totalProperties %></h4>
                <a href="/property/display" class="btn btn-primary">View All Properties</a>
              </div>
            </div>

            <!-- Booked Properties -->
            <div class="card card-outline card-primary">
              <div class="card-header bg-primary">
                <h5 class="m-0 text-white"><i class="fas fa-book"></i> Booked Properties</h5>
              </div>
              <div class="card-body">
                <h3>Booked Properties</h3>
                <h4><%= totalBookedProperties %></h4>
                <a href="/admin/property_book" class="btn btn-primary">View Bookings</a>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <!-- Total Users -->
            <div class="card">
              <div class="card-header bg-primary">
                <h5 class="m-0 text-white"><i class="fas fa-users"></i> Total Users</h5>
              </div>
              <div class="card-body">
                <h3>Total Users</h3>
                <h4><%= totalUsers %></h4>
                <a href="/contact/display" class="btn btn-primary">Manage Users</a>
              </div>
            </div>

            <!-- Categories -->
            <div class="card card-outline card-primary">
              <div class="card-header bg-primary">
                <h5 class="m-0 text-white"><i class="fas fa-list-alt"></i> Property Categories</h5>
              </div>
              <div class="card-body">
                <h3>Categories</h3>
                <h4><%= totalCategories %></h4>
                <a href="/category/display" class="btn btn-primary">View Categories</a>
              </div>
            </div>
          </div>

        <% } else if (role === 'seller') { %>
          <!-- Seller Dashboard -->

          <div class="col-lg-6">
            <div class="card bg-light">
              <div class="card-header bg-info">
                <h5 class="m-0 text-white"><i class="fas fa-home"></i> My Listed Properties</h5>
              </div>
              <div class="card-body">
                <h4>Total: <%= sellerPropertiesCount %></h4>
                <a href="/property/display" class="btn btn-info">View My Properties</a>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="card bg-light">
              <div class="card-header bg-info">
                <h5 class="m-0 text-white"><i class="fas fa-book"></i> My Property Bookings</h5>
              </div>
              <div class="card-body">
                <h4>Total Bookings: <%= sellerBookingsCount %></h4>
                <a href="/seller/bookings" class="btn btn-info">View Bookings</a>
              </div>
            </div>
          </div>

        <% } else if (role === 'buyer') { %>
          <!-- Buyer Dashboard -->

          <div class="col-lg-6">
            <div class="card bg-light">
              <div class="card-header bg-success">
                <h5 class="m-0 text-white"><i class="fas fa-book"></i> My Booked Properties</h5>
              </div>
              <div class="card-body">
                <h4>Total Booked: <%= buyerBookingsCount %></h4>
                <a href="/buyer/my-bookings" class="btn btn-success">View My Bookings</a>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="card bg-light">
              <div class="card-header bg-success">
                <h5 class="m-0 text-white"><i class="fas fa-heart"></i> Saved Properties</h5>
              </div>
              <div class="card-body">
                <h4>Favorites: <%= buyerFavoritesCount %></h4>
                <a href="/buyer/saved-properties" class="btn btn-success">View Favorites</a>
              </div>
            </div>
          </div>

        <% } else { %>
          <!-- Unauthorized View -->
          <div class="col-12 text-center">
            <h4 class="text-danger">You are not authorized to view this content.</h4>
          </div>
        <% } %>

      </div>
    </div>
  </div>
</div>

<!-- Control Sidebar -->
<aside class="control-sidebar control-sidebar-dark">
  <div class="p-3">
    <h5>Notifications</h5>
    <p>You have new alerts.</p>
  </div>
</aside>

<%- include('./footer.ejs') %>
